# Session: 2026-01-26 (Linux)

## Summary
Continued work on bbocax service split for multi-output datasets with db_name log context.

## Branch
`feature/bbocax-split-services` in data-alchemy

## Changes Made

### 1. Fixed FILE_PATTERN for back_office_preferred_exch_corporate_actions
- Pattern: `(pfdExch(Asia|Euro|Lamr|Namr)CorporateActions|pfd_exch_)`
- Matches:
  - `pfdExchAsiaCorporateActions.parquet` (parquet files)
  - `pfd_exch_asia.cax` (CAX files)

### 2. Updated Staging Playbook (`deploy-data-alchemy-staging.yml`)
- Removed original `bbocax_cwiq_pipe` service
- Added 3 split services:
  - `data-alchemy-staging-bloomberg-1.0-bbocax-back_office_futures`
  - `data-alchemy-staging-bloomberg-1.0-bbocax-corporate_actions`
  - `data-alchemy-staging-bloomberg-1.0-bbocax-back_office_preferred_exch_corporate_actions`

### 3. Updated Prod06 Playbook (`deploy-data-alchemy-prod06.yml`)
- Kept original `bbocax_cwiq_pipe` service active
- Added commented sections for 3 split services (ready to uncomment when needed)

## Service FILE_PATTERN Summary

| Service | FILE_PATTERN |
|---------|--------------|
| back_office_futures | `(share\|nonShare)FuturesBulk` |
| corporate_actions | `(equity\|effDt\|premarket).*(CorporateActions\|corporateActions)` |
| back_office_preferred_exch_corporate_actions | `(pfdExch(Asia\|Euro\|Lamr\|Namr)CorporateActions\|pfd_exch_)` |

## Commits
```
ba400b8 docs: add commented bbocax split services to prod06 playbook
8aef7b2 refactor: replace bbocax_cwiq_pipe with split services in staging
ce198ff fix: correct FILE_PATTERN for back_office_preferred_exch_corporate_actions services
90b1b3a feat: add split service files for bbocax back_office_futures
a03d4f0 feat: add split service files for bbocax corporate actions
```

## Next Steps
- Test split services in staging
- When validated, uncomment prod06 playbook and switch production
