# Session: 2026-01-21 (Linux)

## Summary
Monitored bbocax_cwiq_pipe pipeline run and verified file system writes between Gold (`/sf/data/`) and Platinum (`/sf/proj/`).

## Pipeline Run: bbocax_cwiq_pipe

### Command
```bash
uv run python -m data_alchemy.main --vendor bloomberg --dataset bbocax_cwiq_pipe --backfill 5000 --ignore-db 2>&1 | tee ~/bbocax_all.log
```

### Results
- **Bronze:** 216,404 files (completed)
- **Silver:** 216,400 files (completed)
- **Gold:** 97,737 files (completed)
- **Total time:** ~4.3 hours

**Note:** `MOVE_PRODUCTION_FILES` was not set, so unmapped files were skipped.

## File System Verification

### Currency Dataset Comparison
**Paths:**
- Gold: `/sf/data/bloomberg/back_office_currency/1.0/raw/`
- Platinum: `/sf/proj/data_alchemy/assets/cdp_out/bloomberg/back_office_currency/1.0/raw/`

**File structure per date (15 files):**
- 5 x `.out` files
- 5 x `.csv` files
- 5 x `.parquet` files

### Good Dates (Gold = Platinum)
**30 dates with matching counts (15 = 15):**
```
2025: Nov 18-21, 23-28, 30, Dec 1-5, 7, 12, 14-17, 19, 21-22, 24-26, 28-29
```

**Good date range for DQ:**
```
20251118:20251207
```

### Bad Dates (Mismatch)
- Oct 12 - Nov 17: Gold has 5 files, Platinum has 15
- Some Dec dates: Partial files
- 2026 Jan 1-8: Gold has 0, Platinum has 96 files

## DQ Commands

### Check currency with good date range
```bash
uv run python -m data_alchemy.main --vendor bloomberg --dataset bbocax_cwiq_pipe --version 1.0 --dq --dq-date-range 20251118:20251207
```

### With verbose output
```bash
LOG_LEVEL=DEBUG uv run python -m data_alchemy.main --vendor bloomberg --dataset bbocax_cwiq_pipe --version 1.0 --dq --dq-date-range 20251118:20251207 --verbose-dq 2>&1 | tee ~/dq_report.log
```

## Key Findings

1. **back_office_currency** has no grabber maps - must run DQ via `bbocax_cwiq_pipe`
2. **File type mismatches** can be ignored
3. **Raw/Gold validation passed** for 20251118:20251207 (Total Errors: 0)
4. **2026 data missing in Gold** - pipeline ran without MOVE_PRODUCTION_FILES
