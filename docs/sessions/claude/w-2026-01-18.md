# Session: 2026-01-18 (Windows)

## Summary
Added comprehensive CLI documentation to Notion Investigation DB page.

## Work Done

### Notion Page Updates
**Page**: [Investigation DB](https://www.notion.so/Investigation-DB-2eb56dc5f1d98023ac1fe45c39ae8101)

Added the following sections:

1. **SQLite Queries (CWIQ Pipe)**
   - Check stuck files query
   - Clear stuck files / consumer cache

2. **SQLite Queries (Data-Alchemy)**
   - FileMetadata schema (CREATE TABLE)
   - Processing status queries
   - Find unprocessed files (Bronze→Silver, Silver→Gold)
   - Reprocessing queries
   - File lookup & lineage
   - Recent activity queries

3. **Schema Column Details**
   - Full table with 14 columns documented
   - Stratum values (bronze, silver, gold)
   - File lineage flow diagram

4. **CLI Reference (Data-Alchemy main.py)**
   - 15 flags documented (--vendor, --dataset, --version, --backfill, --watch, etc.)
   - Common use cases with examples

5. **CLI: create_sample_data**
   - Flags: json_files, -p/--parallel
   - Environment variables: RAW_FP_PREFIX, CRAWLER_BASE_DIR, DOCKER_RUNNING, BLOOMBERG_DES_KEY
   - Supported file types
   - Use cases

6. **CLI: directory_crawler**
   - 17 flags documented
   - Environment variables
   - Filter modes (unique, month, n_days)
   - Use cases (parallel, caching, append mode)

### Credentials Updated
Added to `~/.notion/credentials`:
```
INVESTIGATION_DB_PAGE=2eb56dc5-f1d9-8023-ac1f-e45c39ae8101
```

## Key Commands Used

```bash
# Notion API append
curl -X PATCH "https://api.notion.com/v1/blocks/{page_id}/children" \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -H "Notion-Version: 2022-06-28" \
  -d @payload.json
```

## Files Referenced
- `data-alchemy/data_alchemy/main.py` - Main CLI
- `data-alchemy/data_alchemy/utils/create_sample_data.py` - Sample data generator
- `data-alchemy/data_alchemy/utils/directory_crawler.py` - Directory crawler
- `data-alchemy/data_alchemy/utils/db.py` - Database utilities
- `data-alchemy/data_alchemy/models/models.py` - FileMetadata model
- `data-alchemy/docs/operations/debugging-guide.md` - CWIQ pipe queries

## Notes
- All CLI tools use `uv run python -m data_alchemy.{module}`
- Main CLI tools: main, create_sample_data, directory_crawler
- Other utils are internal (no CLI): validation_quality, compression, db, file_discovery
