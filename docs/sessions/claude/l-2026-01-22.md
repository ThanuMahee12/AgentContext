# Session: 2026-01-22 (Linux)

## Summary
- Session started
- Pulled latest changes and updated submodules
- data-alchemy updated to 471ea6c (ibes_rt_estimates grabber map, reuters_fundamentals fixes)
- Working on bbocax equities mapping

---

## Work Log

### Environment Setup
- Updated data-alchemy submodule from e95341e to 471ea6c
- Committed submodule update to parent repo

### data-alchemy Updates (471ea6c)
- LSEG Refinitiv ibes_rt_estimates grabber map added
- reuters_fundamentals grabber map fixes
- Deployment playbooks for ibes_rt_estimates

### bbocax Equities Mapping

**Branch:** `feature/bbocax-equities`

**Files in branch (not in main):**
- `bloomberg_bbocax_cwiq_pipe_equities_1_0.json`
- `bloomberg_bbocax_cwiq_pipe_equities_parquet_1_0.json`
- `bloomberg.json` (decrypt patterns)

**Bronze File Counts (ny5-predpalch01):**

| Date | Files | Notes |
|------|-------|-------|
| 2025/12/08 | 1672 | Weekend |
| 2025/12/09 | 8226 | Full |
| 2025/12/10 | 8026 | Full |
| 2025/12/11 | 1832 | Partial |
| 2025/12/12 | 2139 | Partial |
| 2025/12/18 | 1656 | Partial |
| 2025/12/23 | 4042 | Holiday week |
| 2025/12/26 | 24 | Holiday |
| 2025/12/30 | 4188 | Holiday week |
| 2025/12/31 | 7932 | Full |
| 2026/01/01 | 7944 | Full |
| 2026/01/02 | 7876 | Full |
| 2026/01/03 | 4632 | Partial |
| 2026/01/04 | 7926 | Full |
| 2026/01/05 | 7946 | Full |
| 2026/01/06 | 7969 | Full |
| 2026/01/07 | 7932 | Full |
| 2026/01/08 | 7924 | Full |
| 2026/01/09 | 8130 | Full |
| 2026/01/10 | 4634 | Partial |
| 2026/01/11 | 7920 | Full |
| 2026/01/12 | 8320 | Full |
| 2026/01/13 | 7662 | Full |
| 2026/01/14 | 8256 | Full |
| 2026/01/15 | 5510 | Partial |
| 2026/01/16 | 5604 | Partial |
| 2026/01/17 | 5112 | Partial |
| 2026/01/18 | 7830 | Full |
| 2026/01/19 | 8090 | Full |
| 2026/01/20 | 8412 | Full |
| 2026/01/21 | 8402 | Full |
| 2026/01/22 | 2540 | Today (partial) |

**Observations:**
- Full weekday: ~7900-8400 files
- Weekends/holidays: reduced counts
- Best test date: 2026/01/21 (8402 files)

**Equity File Categories (from tree analysis):**

| Category | Unique Files | Current Map |
|----------|--------------|-------------|
| equityOptions* | 260 | EXCLUDED |
| equityIndex* | 50 | EXCLUDED |
| equityWarrant* | 47 | Partial |
| equitySec* | 10 | Partial |
| equityIndia* | 5 | Partial |
| equityMifid* | 8 | Partial |
| Core equity | 135 | Covered |
| **Total** | 548 | - |

---

## Tasks

- [ ] Verify equities mapping coverage
- [ ] Create sample data for testing
- [ ] Compare with /sf/data dummy

---

## Commands Reference

```bash
# Count files per date in bronze
find /sf/data/bloomberg/bbocax_cwiq_pipe/1.0/bronze -mindepth 3 -maxdepth 3 -type d -exec sh -c 'echo "$(find "$1" -type f | wc -l) $1"' _ {} \; | sort -k2

# Count equity files for a specific date
find /sf/data/bloomberg/bbocax_cwiq_pipe/1.0/bronze/2026/01/21 -type f -name "*equity*" | wc -l

# List unique equity filenames
find /sf/data/bloomberg/bbocax_cwiq_pipe/1.0/bronze/2026/01/21 -type f -name "*equity*" | sed 's|.*/||' | sed 's/--.*$//' | sort -u
```
