# Session: 2026-01-28 (Linux)

## Context
- **Repo**: alchmy
- **Branch**: data-alchemy on `feature/bbocax-corporate-actions`

## Goals
- [x] Review yesterday's session and continue bbocax mapping
- [x] Get bbocax equities command
- [x] Get bbocax futures_extended command

## Work Log

### Session Context Review

Reviewed yesterday's session (2026-01-27) and bbocax notes:
- data-alchemy on `feature/bbocax-corporate-actions` (5 commits ahead of dev)
- Multiple bbocax branches available for different datasets

### BBOCAX Commands Reference

#### 1. Corporate Actions (from yesterday)
```bash
uv run python -m data_alchemy.main \
  --vendor bloomberg \
  --dataset bbocax_cwiq_pipe \
  --version 1.0 \
  --backfill 1650 \
  --ignore-db \
  --db-name '{vendor}--{ds}--corporate_actions' \
  --file-pattern '((equity|pfdExch|effDt|premarket).+CorporateActions|equity_(asia1|asia2|euro|lamr|namr)\.cax|pfd_exch_(asia|euro|lamr|namr)\.cax)'
```

#### 2. Back Office Equities
**Source**: `origin/feature/bbocax-equities` service file
```bash
uv run python -m data_alchemy.main \
  --vendor bloomberg \
  --dataset bbocax_cwiq_pipe \
  --version 1.0 \
  --backfill 1650 \
  --ignore-db \
  --db-name '{vendor}--{ds}--back_office_equities' \
  --file-pattern '(equity(Asia1|Asia2|Euro|Lamr|Namr|MifidEuro)(?!.*(CorporateActions|\.cax))|equity_(asia1|asia2|euro|lamr|namr|mifid_euro)(?!\.cax))'
```

**Pattern breakdown:**
| Part | Matches |
|------|---------|
| `equity(Asia1\|Asia2\|Euro\|Lamr\|Namr\|MifidEuro)` | CSV/parquet files |
| `(?!.*(CorporateActions\|\.cax))` | Excludes CorporateActions and .cax |
| `equity_(asia1\|...\|mifid_euro)` | Binary: .dif, .out files |
| `(?!\.cax)` | Excludes .cax files |

#### 3. Back Office Futures Extended
**Source**: `origin/feature/bbocax-futures-ext` service file
```bash
uv run python -m data_alchemy.main \
  --vendor bloomberg \
  --dataset bbocax_cwiq_pipe \
  --version 1.0 \
  --backfill 1650 \
  --ignore-db \
  --db-name '{vendor}--{ds}--back_office_futures_extended' \
  --file-pattern '(share|nonShare)FuturesExtended'
```

**Matches:**
- `shareFuturesExtendedAsia1.csv`, `shareFuturesExtendedEuro.parquet`
- `nonShareFuturesExtendedAsia.csv`, `nonShareFuturesExtendedNamr.parquet`
- V2/V3 variants included

---

## Service File Branches Reference

| Dataset | Branch | Service File |
|---------|--------|--------------|
| back_office_equities | `feature/bbocax-equities` | `data-alchemy-prod-bloomberg-1.0-bbocax-back_office_equities.service` |
| back_office_futures_extended | `feature/bbocax-futures-ext` | `data-alchemy-prod-bloomberg-1.0-bbocax-back_office_futures_extended.service` |
| corporate_actions | `feature/bbocax-corporate-actions` | Current branch |

---

## Next Steps
- [ ] Run equities backfill command
- [ ] Run futures_extended backfill command
- [ ] Validate DQ for both datasets
- [ ] Merge branches to dev
