# 2026-01-11

## Project: alchmy

### What I did
- Set up AgentContext repo for global session management
- Configured MkDocs with GitHub Pages CI/CD
- Organized structure: sessions/ + notes/

### Notes
- Moved session management from alchmy repo to global level
- Single markdown file per project in notes/
- Auto-deploy on push via GitHub Actions

---

## Project: alchmydb

### What I did
- Added `alchemy_service` table to track systemd services running data-alchemy pipelines
- Created 20 service records (15 vendor-version-dataset + 5 vendor-only)
- Updated `alchemy_server` with ny5-predpalch01 from ansible inventory
- Created `alchmydb/CLAUDE.md` for Claude Code guidance
- Optimized `alchmy/CLAUDE.md` with build commands

### Schema: alchemy_service
```sql
CREATE TABLE alchemy_service (
    service_id, server_id, raw_id, vendor_id,
    dataset_name, dataset_version, service_name,
    environment, exec_script, watch_interval,
    fp_prefix, raw_fp_prefix, log_path, playbook_file
);
```

### Source references
- Service files: `data-alchemy/build/service-files/`
- Playbook: `deploy-data-alchemy-prod06.yml`
- Inventory: `data-alchemy/build/inventory/hosts.yml`

---

## Project: alchmydb (continued)

### Filetype Normalization

Refactored `raw_filetype` from flat table to normalized structure:

**Before (flat):**
```
raw_filetype: filetype_id, raw_id, extension, mime_type
```

**After (normalized):**
```
filetype (lookup)           raw_filetype (bridge)
├── filetype_id PK          ├── raw_filetype_id PK
├── extension UNIQUE        ├── raw_id FK
├── mime_type               ├── filetype_id FK
├── category                └── is_primary
└── description
```

**Categories:**
- data: csv, parquet, json, xml, txt
- archive: gz, zip, lz4
- spreadsheet: xlsx
- vendor: dfrt, cov, rsk (MSCI)
- control: flg

**Benefit:** Reusable for bronze, gold, cdp layers

---

### Next steps (tomorrow)
- CDP Target tables: `cdp_vendor`, `cdp_dataset`, `cwiq_cdp_mapping`
